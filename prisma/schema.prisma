// prisma/schema.prisma

datasource db {
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

enum UserType {
  member
  trainer
  system_admin
}

enum MetricType {
  heartbeat
  calories
  steps
}

model User {
  id         Int      @id @default(autoincrement())
  name       String   @unique
  password   String
  typeOfUser UserType @default(member)


  member Member?
  
  @@index([name])
}

model Member {
  id            Int            @id @default(autoincrement())
  userId        Int            @unique
  user          User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  healthMetrics HealthMetric[]
}

model HealthMetric {
  id          Int        @id @default(autoincrement())
  metricType  MetricType
  value       Float      // The actual measurement value
  measuredAt  DateTime   @default(now())
  memberId    Int
  member      Member     @relation(fields: [memberId], references: [id], onDelete: Cascade)
  
  @@index([memberId])
  @@index([measuredAt])
}

model Trainer{
  id                Int            @id @default(autoincrement())
  TrainerId         Int            @unique
  isWorking         Bool
  hourlyRate        Int
  certifications    Text
  bio               Text

  timeSlots         TimeSlot[]
  classes           GroupClass[]
  sessions          PTSession[]
}

model TimeSlot{
  weeklySlot        DateTime    @unique
  individualSlot    DateTime    @unique
}